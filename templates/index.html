<html>
<body>

<!-- 		<form id="emit">
		<input id="emit_data" type="text">
		<input type="submit">
	</form> -->

	<div id="log">
		<p>Hello</p>
	</div>

	<form id="send_message">
		<input id="message" type="text" placeholder="Your message">
		<input type="submit">
	</form>

	<form id="join_room">
		User:<input type="text" id="user">
		Room:<input type="text" id="room">
		<input type="submit">
	</form>


	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
	<script>
	$(document).ready(function(){

	    var socket = io.connect('http://' + document.domain + ':' + location.port + "/chat");

	    // socket.on('connected', function(msg) {
	    // 	alert("Connected");
	    // });

	    $('form#send_message').submit(function(event){
	    	event.preventDefault();
	    	socket.emit('my event', {data: $("#message").val()});
	    });

	    socket.on('my response', function(response){
	    	$('#log').append('<p>' + response.user + ': ' + response.data + '</p>');
	    });

	    $('form#join_room').submit(function(event){
	    	event.preventDefault();
	    	socket.emit('join', {'username': $('#user').val(), 'room': $('#room').val()});
	    });

	    //     $('#log').append('<p>Received: ' + msg.data + '</p>');
	    // });

	    // $('form#emit').submit(function(event) {
	    // 	// debugger;
	    //     socket.emit('my event', {data: $('#emit_data').val()});
	    //     return false;
	    // });

	});
	</script>

</body>
<html>

